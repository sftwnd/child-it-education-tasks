# Задание 27 №[41002](https://inf-ege.sdamgia.ru/problem?id=41002)

Дана последовательность целых чисел. Необходимо _**найти максимально возможную сумму её непрерывной подпоследовательности**_, в которой _**количество положительных нечётных элементов кратно k = 30**_.

### Входные данные:

Даны два входных файла (_[файл A](./27-A.txt)_ и _[файл B](https://inf-ege.sdamgia.ru/get_file?id=99379)_).

Первая строка входного файла содержит целое число **N**  — общее количество чисел в наборе. Каждая из следующих **N** строк содержит одно число. Гарантируется, что общая сумма любой выборки заданных чисел не превышает _2 · 10^9_ по абсолютной величине.

### Выходные данные:

Вам даны два входных файла (A и B), каждый из которых имеет описанную выше структуру. В ответе укажите два числа: сначала значение искомой суммы для файла A, затем для файла B.

## Решение:

Если рассмотреть все такие последовательности, то получаем, что:

* В них содержится число элементов, кратное 30
* Последовательность делит весь набор данных на три части: до последовательности, сама последовательность и после
* Ноль кратен всему (и 30)

Если мы возьмём первый встретившийся символ, соответствующий требованиям, то у нас будет фиксированной набор идущих подряд цепочек по 30 элементов в каждой, плюс все возможные комбинации.

Далее - рассматриваем вариант с пропуском первого элемента и т.д. 

Таких вариантов у нас ровно 30, а далее - все повторяется.

По этому [мы будем двигаться по элементам слева направо](eg27.cpp#L23-L25), и при встрече нового элемента [инкрементируем их количество]((eg27.cpp#L26)). Если взять его номер по модулю 30, то мы получаем номер набора, который рассматривается в данный момент.

Двигаясь по элементам мы определяем их сумму на текущий момент и если она меньше, чем сохранённая сумма для текущего значения модуля от count, то мы [запоминаем её для заданного набора](eg27.cpp#L28).

Если из суммы на текущий момент мы вычтем запомненную «минимальную сумму», то если она превысит текущее значение максимальной суммы элементов - [увеличиваем её до найденного максимума](eg27.cpp#L29).

По завершении цикла [выводим найденную максимальную сумму](eg27.cpp#L31).

_**FYI.:**_ Поскольку не важно с какой стороны читать, то рекомендую последовательность [перелить в новый файл](./eg27-reverse.cpp) с обратным порядком и проверить для него - должен получиться тот же результат при правильной работе программы.
